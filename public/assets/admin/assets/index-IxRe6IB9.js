import{j as e,r as p,a as b,g as _,B as g,t as f}from"./index-_xd8OyP8.js";import{S as y}from"./separator-lX8UNwTG.js";import{z as n,t as S}from"./zod-x_8lkCGK.js";import{u as v,F as N,a as l,b as t,c as o,d as c,f as i,e as a}from"./form-DIzSOdtk.js";import{I as x}from"./input-d0vtE30O.js";import{S as m}from"./switch-w5WyeRwk.js";import{C as F}from"./react-icons.esm-rZq2pt7A.js";import{u as C}from"./useQuery-mr7Ep0hT.js";import{s as L,e as T}from"./index-BycJudEO.js";import{S as O}from"./config-BDd6elvr.js";import"./index-CX6PQ3zO.js";import"./index-BwSRHYe4.js";import"./index-CRh0M8qI.js";import"./index-BlMNiBlp.js";import"./clipboard-YH5zrf5X.js";import"./IconTicket-COhvkaJH.js";function R({title:d,description:s,children:j}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:d}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s})]}),e.jsx(y,{}),j]})}const U=n.object({logo:n.string().nullable().nullable(),force_https:n.number().nullable(),stop_register:n.number().nullable(),app_name:n.string().nullable(),app_description:n.string().nullable(),app_url:n.string().nullable(),subscribe_url:n.string().nullable(),try_out_plan_id:n.number().nullable(),try_out_hour:n.number().nullable(),tos_url:n.string().nullable(),currency:n.string().nullable(),currency_symbol:n.string().nullable()}),E={logo:"",force_https:0,stop_register:0,app_name:"",app_description:"",app_url:"",subscribe_url:"",try_out_plan_id:0,try_out_hour:0,tos_url:"",currency:"USD",currency_symbol:"$"};function k(){const{data:d}=C({queryKey:["settings","site"],queryFn:()=>T("site")}),s=v({resolver:S(U),defaultValues:E,mode:"onChange"});p.useEffect(()=>{if(d?.data?.site){const r=d?.data?.site;Object.entries(r).forEach(([h,u])=>{s.setValue(h,u)})}},[d]);function j(r){L(r).then(({data:h})=>{h&&f.success("更新成功")})}return e.jsx(N,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(j),className:"space-y-8",children:[e.jsx(l,{control:s.control,name:"app_name",render:({field:r})=>e.jsxs(t,{children:[e.jsx(o,{children:"站点名称"}),e.jsx(c,{children:e.jsx(x,{placeholder:"请输入站点名称",...r})}),e.jsx(i,{children:"用于显示需要站点名称的地方。"}),e.jsx(a,{})]})}),e.jsx(l,{control:s.control,name:"app_description",render:({field:r})=>e.jsxs(t,{children:[e.jsx(o,{children:"站点描述"}),e.jsx(c,{children:e.jsx(x,{placeholder:"请输入站点描述",...r})}),e.jsx(i,{children:"用于显示需要站点名称的地方。"}),e.jsx(a,{})]})}),e.jsx(l,{control:s.control,name:"app_url",render:({field:r})=>e.jsxs(t,{children:[e.jsx(o,{children:"站点网址"}),e.jsx(c,{children:e.jsx(x,{placeholder:"请输入站点URL，末尾不要/",...r})}),e.jsx(i,{children:"当前网站最新网址，将会在邮件等需要用于网址处体现。"}),e.jsx(a,{})]})}),e.jsx(l,{control:s.control,name:"force_https",render:({field:r})=>e.jsxs(t,{children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{className:"text-base",children:"强制HTTPS"}),e.jsx(i,{children:"当站点没有使用HTTPS，CDN或反代开启强制HTTPS时需要开启。"})]}),e.jsx(c,{children:e.jsx(m,{checked:r.value,onCheckedChange:r.onChange})})]})}),e.jsx(l,{control:s.control,name:"logo",render:({field:r})=>e.jsxs(t,{children:[e.jsx(o,{children:"LOGO"}),e.jsx(c,{children:e.jsx(x,{placeholder:"请输入LOGO URL，末尾不要/",...r})}),e.jsx(i,{children:"用于显示需要LOGO的地方。"}),e.jsx(a,{})]})}),e.jsx(l,{control:s.control,name:"subscribe_url",render:({field:r})=>e.jsxs(t,{children:[e.jsx(o,{children:"订阅URL"}),e.jsx(c,{children:e.jsx(x,{placeholder:'用于订阅所使用，多个订阅地址用","隔开.留空则为站点URL。',...r})}),e.jsx(i,{children:"用于订阅所使用，留空则为站点URL。"}),e.jsx(a,{})]})}),e.jsx(l,{control:s.control,name:"tos_url",render:({field:r})=>e.jsxs(t,{children:[e.jsx(o,{children:"用户条款(TOS)URL"}),e.jsx(c,{children:e.jsx(x,{placeholder:"请输入用户条款URL，末尾不要/",...r})}),e.jsx(i,{children:"用于跳转到用户条款(TOS)"}),e.jsx(a,{})]})}),e.jsx(l,{control:s.control,name:"stop_register",render:({field:r})=>e.jsxs(t,{children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{className:"text-base",children:"停止新用户注册"}),e.jsx(i,{children:"开启后任何人都将无法进行注册。"})]}),e.jsx(c,{children:e.jsx(m,{checked:r.value,onCheckedChange:r.onChange})})]})}),e.jsx(l,{control:s.control,name:"try_out_plan_id",render:({field:r})=>e.jsxs(t,{children:[e.jsx(o,{children:"注册试用"}),e.jsxs("div",{className:"relative w-max",children:[e.jsx(c,{children:e.jsxs("select",{className:b(_({variant:"outline"}),"w-[200px] appearance-none font-normal"),...r,children:[e.jsx("option",{value:"inter",children:"关闭"}),e.jsx("option",{value:"manrope",children:"套餐1"}),e.jsx("option",{value:"system",children:"套餐2"})]})}),e.jsx(F,{className:"absolute right-3 top-2.5 h-4 w-4 opacity-50"})]}),e.jsx(i,{children:"选择需要试用的订阅，如果没有选项请先前往订阅管理添加。"}),e.jsx(a,{})]})}),e.jsx(l,{control:s.control,name:"currency",render:({field:r})=>e.jsxs(t,{children:[e.jsx(o,{children:"货币单位"}),e.jsx(c,{children:e.jsx(x,{placeholder:"CNY",...r})}),e.jsx(i,{children:"仅用于展示使用，更改后系统中所有的货币单位都将发生变更。"}),e.jsx(a,{})]})}),e.jsx(l,{control:s.control,name:"currency_symbol",render:({field:r})=>e.jsxs(t,{children:[e.jsx(o,{children:"货币符号"}),e.jsx(c,{children:e.jsx(x,{placeholder:"¥",...r})}),e.jsx(i,{children:"仅用于展示使用，更改后系统中所有的货币单位都将发生变更。"}),e.jsx(a,{})]})}),e.jsx(g,{type:"submit",children:"更新配置"})]})})}function J(){const d=O.find(s=>s.key==="site");return e.jsx(R,{title:d.title,description:d.description,children:e.jsx(k,{})})}export{J as default};
