import{r as d,j as s,B as o,t as x}from"./index-_xd8OyP8.js";import{D as f,e as g,a as b,b as F,c as S,d as D,f as C,g as v}from"./button-DhrtVlOa.js";import{u as N,F as I,a as w,b as y,c as z,d as G,f as L,e as B}from"./form-DIzSOdtk.js";import{I as E}from"./input-d0vtE30O.js";import{z as i,t as O}from"./zod-x_8lkCGK.js";import{I as T}from"./iconify-Dsf6bxB2.js";import{X as A}from"./index-BycJudEO.js";import{L as H}from"./loader-circle-BgRqqHyr.js";const M=i.object({id:i.number().optional(),name:i.string().min(2,"组名至少需要2个字符").max(50,"组名不能超过50个字符").regex(/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/,"组名只能包含字母、数字、中文、下划线和连字符")});function J({refetch:t,dialogTrigger:u,defaultValues:h={name:""},type:a="add"}){const e=N({resolver:O(M),defaultValues:h,mode:"onChange"}),[p,n]=d.useState(!1),[l,m]=d.useState(!1),j=async r=>{try{m(!0);const{data:c}=await A(r);c&&(x.success(a==="edit"?"更新成功":"创建成功"),t&&t(),e.reset(),n(!1))}catch{x.error("操作失败，请重试")}finally{m(!1)}};return s.jsxs(f,{open:p,onOpenChange:n,children:[s.jsx(g,{asChild:!0,children:u||s.jsxs(o,{variant:"outline",size:"sm",className:"space-x-2",children:[s.jsx(T,{icon:"ion:add",className:"h-4 w-4"}),s.jsx("span",{children:"添加权限组"})]})}),s.jsxs(b,{className:"sm:max-w-[425px]",children:[s.jsxs(F,{children:[s.jsx(S,{children:a==="edit"?"编辑权限组":"创建权限组"}),s.jsx(D,{children:a==="edit"?"修改权限组信息，更新后会立即生效。":"创建新的权限组，可以为不同的用户分配不同的权限。"})]}),s.jsx(I,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(j),className:"space-y-4",children:[s.jsx(w,{control:e.control,name:"name",render:({field:r})=>s.jsxs(y,{children:[s.jsx(z,{children:"组名称"}),s.jsx(G,{children:s.jsx(E,{placeholder:"请输入权限组名称",...r,className:"w-full"})}),s.jsx(L,{children:"权限组名称用于标识不同的用户组，建议使用有意义的名称。"}),s.jsx(B,{})]})}),s.jsxs(C,{className:"gap-2",children:[s.jsx(v,{asChild:!0,children:s.jsx(o,{type:"button",variant:"outline",children:"取消"})}),s.jsxs(o,{type:"submit",disabled:l||!e.formState.isValid,children:[l&&s.jsx(H,{className:"mr-2 h-4 w-4 animate-spin"}),a==="edit"?"更新":"创建"]})]})]})})]})]})}export{J as S};
