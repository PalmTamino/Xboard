import{j as e,a as j,B as n,t as v,r as i}from"./index-ra1jmRmU.js";import{S as N,T as w,U as y}from"./user-nav-Ch7kI57y.js";import{L as S,f as b,g as C}from"./sidelinks-B70MVRK0.js";import{D as r,B as F,u as R,a as T,g as V,b as M,c as D,d as L,e as I,f as k}from"./column-header-p2OHlx2E.js";import{a as B,P as K}from"./react-icons.esm-BRv52UVg.js";import{I as P}from"./input-BJSapCFH.js";import{S as m}from"./server-group-form-B6uHqnlU.js";import{Q as U,I as q}from"./index-vL3ySUIK.js";import{u as G}from"./useQuery-BPONQpNy.js";import{C as _}from"./confirm-dialog-Cgr3O3nI.js";import{u as z}from"./user-D0H1hp3K.js";import{S as H}from"./server-DEcYqpMz.js";import{T as E}from"./trash-2-DZs5wEr-.js";import"./index-CmmzV1O3.js";import"./index-OwEZQf1t.js";import"./index-QSXu8nGm.js";import"./button-BkBuHKqj.js";import"./index-NvRyusV4.js";import"./IconTicket-s_6DwrCY.js";import"./select-ar7QGfF7.js";import"./index-DGqrqZGX.js";import"./index-DBonxKbv.js";import"./tooltip-uHmd8Pkm.js";import"./arrow-up-Cu4ezgY6.js";import"./form-BdPgCkkB.js";import"./zod-DftZp2aV.js";import"./iconify-DJqeKjVQ.js";import"./loader-circle-DZwZUkW0.js";import"./clipboard-Bl2zvJsv.js";function Q({table:t,refetch:s}){const a=t.getState().columnFilters.length>0;return e.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[e.jsxs("div",{className:"flex flex-1 items-center space-x-4",children:[e.jsx(P,{placeholder:"搜索权限组...",value:t.getColumn("name")?.getFilterValue()??"",onChange:o=>t.getColumn("name")?.setFilterValue(o.target.value),className:j("h-9  w-[150px] lg:w-[250px]",a&&"border-primary/50 ring-primary/20")}),a&&e.jsxs(n,{variant:"ghost",onClick:()=>t.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["重置",e.jsx(B,{className:"ml-2 h-4 w-4"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(m,{refetch:s})})]})}const $=t=>[{accessorKey:"id",header:({column:s})=>e.jsx(r,{column:s,title:"组ID"}),cell:({row:s})=>e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(F,{variant:"outline",children:s.getValue("id")})}),enableSorting:!0},{accessorKey:"name",header:({column:s})=>e.jsx(r,{column:s,title:"组名称"}),cell:({row:s})=>e.jsx("div",{className:"flex space-x-2",children:e.jsx("span",{className:"max-w-32 truncate font-medium",children:s.getValue("name")})})},{accessorKey:"users_count",header:({column:s})=>e.jsx(r,{column:s,title:"用户数量"}),cell:({row:s})=>e.jsxs("div",{className:"flex items-center space-x-2 px-4",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.getValue("users_count")})]}),enableSorting:!0},{accessorKey:"server_count",header:({column:s})=>e.jsx(r,{column:s,title:"节点数量"}),cell:({row:s})=>e.jsxs("div",{className:"flex items-center space-x-2 px-4",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.getValue("server_count")})]}),enableSorting:!0,size:8e3},{id:"actions",header:({column:s})=>e.jsx(r,{className:"justify-end",column:s,title:"操作"}),cell:({row:s})=>e.jsxs("div",{className:"flex items-center justify-end",children:[e.jsx(m,{defaultValues:s.original,refetch:t,type:"edit",dialogTrigger:e.jsxs(n,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-muted",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground hover:text-foreground"}),e.jsx("span",{className:"sr-only",children:"编辑"})]})}),e.jsx(_,{title:"确认删除",description:"此操作将永久删除该权限组，删除后无法恢复。确定要继续吗？",confirmText:"删除",variant:"destructive",onConfirm:async()=>{U({id:s.original.id}).then(({data:a})=>{a&&(v.success("删除成功"),t())})},children:e.jsxs(n,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-red-100 dark:hover:bg-red-900",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground hover:text-red-600 dark:hover:text-red-400"}),e.jsx("span",{className:"sr-only",children:"删除"})]})})]})}];function A(){const[t,s]=i.useState({}),[a,o]=i.useState({}),[d,u]=i.useState([]),[x,g]=i.useState([]),{data:p,refetch:c,isLoading:h}=G({queryKey:["serverGroupList"],queryFn:async()=>{const{data:l}=await q();return l}}),f=R({data:p||[],columns:$(c),state:{sorting:x,columnVisibility:a,rowSelection:t,columnFilters:d},enableRowSelection:!0,onRowSelectionChange:s,onSortingChange:g,onColumnFiltersChange:u,onColumnVisibilityChange:o,getCoreRowModel:V(),getFilteredRowModel:M(),getPaginationRowModel:D(),getSortedRowModel:L(),getFacetedRowModel:I(),getFacetedUniqueValues:k(),initialState:{columnPinning:{right:["actions"]}}});return e.jsx(T,{table:f,toolbar:l=>e.jsx(Q,{table:l,refetch:c}),isLoading:h})}function Se(){return e.jsxs(S,{children:[e.jsxs(b,{children:[e.jsx(N,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(w,{}),e.jsx(y,{})]})]}),e.jsxs(C,{className:"flex flex-col",fixedHeight:!0,children:[e.jsx("div",{className:"mb-2 flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"权限组管理"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"管理所有权限组，包括添加、删除、编辑等操作。"})]})}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:e.jsx(A,{})})]})]})}export{Se as default};
