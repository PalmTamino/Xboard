import{c as p,e as C,r as l,j as e,a as c,L as g,g as v,B as f,O as L}from"./index-_xd8OyP8.js";import{D as I,a as M,b as D,c as E,d as $,e as z,L as A,f as S,s as T}from"./sidelinks-DLs_k-Mk.js";import{C as O,a as V,b as W}from"./collapsible-CrQxGeLm.js";import{T as B,a as j,b as N,c as w}from"./tooltip-B58e4dA7.js";import"./index-BwSRHYe4.js";import"./index-CX6PQ3zO.js";import"./index-CcyXqhZ9.js";import"./index-BlMNiBlp.js";import"./react-icons.esm-rZq2pt7A.js";import"./IconTicket-COhvkaJH.js";import"./index-kwEAqj-e.js";var y=p("chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]),R=p("chevrons-left","IconChevronsLeft",[["path",{d:"M11 7l-5 5l5 5",key:"svg-0"}],["path",{d:"M17 7l-5 5l5 5",key:"svg-1"}]]),J=p("menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]),P=p("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function x(){const{pathname:n}=C();return{checkActiveNav:a=>{if(a==="/"&&n==="/")return!0;const s=a.replace(/^\//,""),r=n.replace(/^\//,"");return s?r.startsWith(s):!1}}}function k({key:n,defaultValue:t}){const[a,s]=l.useState(()=>{const r=localStorage.getItem(n);return r!==null?JSON.parse(r):t});return l.useEffect(()=>{localStorage.setItem(n,JSON.stringify(a))},[a,n]),[a,s]}function X(){const[n,t]=k({key:"expanded-sidebar-items",defaultValue:["设置","服务器","财务","用户"]});return{expandedItems:n,toggleItem:s=>{t(r=>r.includes(s)?r.filter(o=>o!==s):[...r,s])},isExpanded:s=>n.includes(s)}}function H({links:n,isCollapsed:t,className:a,closeNav:s}){const r=({sub:o,...i})=>{const d=`${i.title}-${i.href}`;return t&&o?l.createElement(G,{...i,sub:o,key:d,closeNav:s}):t?l.createElement(F,{...i,key:d,closeNav:s}):o?l.createElement(q,{...i,sub:o,key:d,closeNav:s}):l.createElement(b,{...i,key:d,closeNav:s})};return e.jsx("div",{"data-collapsed":t,className:c("group border-b bg-background py-2 transition-[max-height,padding] duration-500 data-[collapsed=true]:py-2 md:border-none",a),children:e.jsx(B,{delayDuration:0,children:e.jsx("nav",{className:"grid gap-1 group-[[data-collapsed=true]]:justify-center group-[[data-collapsed=true]]:px-2",children:n.map(r)})})})}function b({title:n,icon:t,label:a,href:s,closeNav:r,subLink:o=!1}){const{checkActiveNav:i}=x();return e.jsxs(g,{to:s,onClick:r,className:c(v({variant:i(s)?"secondary":"ghost",size:"sm"}),"h-12 justify-start text-wrap rounded-none px-6",o&&"h-10 w-full border-l border-l-slate-500 px-2"),"aria-current":i(s)?"page":void 0,children:[e.jsx("div",{className:"mr-2",children:t}),n,a&&e.jsx("div",{className:"ml-2 rounded-lg bg-primary px-1 text-[0.625rem] text-primary-foreground",children:a})]})}function q({title:n,icon:t,label:a,sub:s,closeNav:r}){const{checkActiveNav:o}=x(),{isExpanded:i,toggleItem:d}=X(),u=!!s?.find(h=>o(h.href)),m=i(n)||u;return e.jsxs(O,{open:m,onOpenChange:()=>d(n),children:[e.jsxs(V,{className:c(v({variant:"ghost",size:"sm"}),"group h-12 w-full justify-start rounded-none px-6"),children:[e.jsx("div",{className:"mr-2",children:t}),n,a&&e.jsx("div",{className:"ml-2 rounded-lg bg-primary px-1 text-[0.625rem] text-primary-foreground",children:a}),e.jsx("span",{className:c('ml-auto transition-all group-data-[state="open"]:-rotate-180'),children:e.jsx(y,{stroke:1})})]}),e.jsx(W,{className:"collapsibleDropdown",asChild:!0,children:e.jsx("ul",{children:s.map(h=>e.jsx("li",{className:"my-1 ml-8",children:e.jsx(b,{...h,subLink:!0,closeNav:r})},h.title))})})]})}function F({title:n,icon:t,label:a,href:s}){const{checkActiveNav:r}=x();return e.jsxs(j,{delayDuration:0,children:[e.jsx(N,{asChild:!0,children:e.jsxs(g,{to:s,className:c(v({variant:r(s)?"secondary":"ghost",size:"icon"}),"h-12 w-12"),children:[t,e.jsx("span",{className:"sr-only",children:n})]})}),e.jsxs(w,{side:"right",className:"flex items-center gap-4",children:[n,a&&e.jsx("span",{className:"ml-auto text-muted-foreground",children:a})]})]})}function G({title:n,icon:t,label:a,sub:s}){const{checkActiveNav:r}=x(),o=!!s?.find(i=>r(i.href));return e.jsxs(I,{children:[e.jsxs(j,{delayDuration:0,children:[e.jsx(N,{asChild:!0,children:e.jsx(M,{asChild:!0,children:e.jsx(f,{variant:o?"secondary":"ghost",size:"icon",className:"h-12 w-12",children:t})})}),e.jsxs(w,{side:"right",className:"flex items-center gap-4",children:[n," ",a&&e.jsx("span",{className:"ml-auto text-muted-foreground",children:a}),e.jsx(y,{size:18,className:"-rotate-90 text-muted-foreground"})]})]}),e.jsxs(D,{side:"right",align:"start",sideOffset:4,children:[e.jsxs(E,{children:[n," ",a?`(${a})`:""]}),e.jsx($,{}),s.map(({title:i,icon:d,label:u,href:m})=>e.jsx(z,{asChild:!0,children:e.jsxs(g,{to:m,className:`${r(m)?"bg-secondary":""}`,children:[d," ",e.jsx("span",{className:"ml-2 max-w-52 text-wrap",children:i}),u&&e.jsx("span",{className:"ml-auto text-xs",children:u})]})},`${i}-${m}`))]})]})}function K({className:n,isCollapsed:t,setIsCollapsed:a}){const[s,r]=l.useState(!1);return l.useEffect(()=>{s?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden")},[s]),e.jsxs("aside",{className:c(`fixed left-0 right-0 top-0 z-50 w-full border-r-2 border-r-muted transition-[width] md:bottom-0 md:right-auto md:h-svh ${t?"md:w-14":"md:w-64"}`,n),children:[e.jsx("div",{onClick:()=>r(!1),className:`absolute inset-0 transition-[opacity] delay-100 duration-700 ${s?"h-svh opacity-50":"h-0 opacity-0"} w-full bg-black md:hidden`}),e.jsxs(A,{children:[e.jsxs(S,{className:"sticky top-0 justify-between px-4 py-3 shadow md:px-4",children:[e.jsxs("div",{className:`flex items-center ${t?"":"gap-2"}`,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",className:`transition-all ${t?"h-6 w-6":"h-8 w-8"}`,children:[e.jsx("rect",{width:"256",height:"256",fill:"none"}),e.jsx("line",{x1:"208",y1:"128",x2:"128",y2:"208",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.jsx("line",{x1:"192",y1:"40",x2:"40",y2:"192",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.jsx("span",{className:"sr-only",children:"Website Name"})]}),e.jsx("div",{className:`flex flex-col justify-end truncate ${t?"invisible w-0":"visible w-auto"}`,children:e.jsx("span",{className:"font-medium",children:window?.settings?.title})})]}),e.jsx(f,{variant:"ghost",size:"icon",className:"md:hidden","aria-label":"Toggle Navigation","aria-controls":"sidebar-menu","aria-expanded":s,onClick:()=>r(o=>!o),children:s?e.jsx(P,{}):e.jsx(J,{})})]}),e.jsx(H,{id:"sidebar-menu",className:`h-full flex-1 overflow-auto ${s?"max-h-screen":"max-h-0 py-0 md:max-h-screen md:py-2"}`,closeNav:()=>r(!1),isCollapsed:t,links:T}),e.jsx(f,{onClick:()=>a(o=>!o),size:"icon",variant:"outline",className:"absolute -right-5 top-1/2 hidden rounded-full md:inline-flex",children:e.jsx(R,{stroke:1.5,className:`h-5 w-5 ${t?"rotate-180":""}`})})]})]})}function Q(){const[n,t]=k({key:"collapsed-sidebar",defaultValue:!1});return l.useEffect(()=>{const a=()=>{t(window.innerWidth<768?!1:n)};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[n,t]),[n,t]}function ie(){const[n,t]=Q();return e.jsxs("div",{className:"relative h-full overflow-hidden bg-background",children:[e.jsx(K,{isCollapsed:n,setIsCollapsed:t}),e.jsx("main",{id:"content",className:`overflow-x-hidden pt-16 transition-[margin] md:overflow-y-hidden md:pt-0 ${n?"md:ml-14":"md:ml-64"} h-full`,children:e.jsx(L,{})})]})}export{ie as default};
