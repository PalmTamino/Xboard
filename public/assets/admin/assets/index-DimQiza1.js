import{r as j,j as e,B as h,t as p}from"./index-ra1jmRmU.js";import{S as v}from"./separator-Ckt7QEUw.js";import{z as n,t as _}from"./zod-DftZp2aV.js";import{u as w,F as f,a as o,b as d,d as a,e as t}from"./form-BdPgCkkB.js";import{I as l}from"./input-BJSapCFH.js";import{u as g}from"./useQuery-BPONQpNy.js";import{u as b}from"./useMutation-CAQi7k46.js";import{e as F,s as N}from"./index-vL3ySUIK.js";import"./index-QSXu8nGm.js";import"./clipboard-Bl2zvJsv.js";const S=n.object({windows_version:n.string().nullable(),windows_download_url:n.string().nullable(),macos_version:n.string().nullable(),macos_download_url:n.string().nullable(),android_version:n.string().nullable(),android_download_url:n.string().nullable()}),y={windows_version:"",windows_download_url:"",macos_version:"",macos_download_url:"",android_version:"",android_download_url:""};function A(){const r=w({resolver:_(S),defaultValues:y,mode:"onChange"}),{data:i}=g({queryKey:["settings","app"],queryFn:()=>F("app")});j.useEffect(()=>{if(i?.data.app){const s=i.data.app;Object.entries(s).forEach(([c,u])=>{r.setValue(c,u)})}},[i]);const{mutate:x,status:m}=b({mutationFn:s=>N(s).then(({data:c})=>c&&p.success("保存成功")),mutationKey:["settings","app","update"]});return e.jsxs(f,{...r,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Windows"}),e.jsx("div",{className:"text-[0.8rem] text-muted-foreground",children:"Windows端版本号及下载地址"}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1",children:e.jsx(o,{control:r.control,name:"windows_version",render:({field:s})=>e.jsxs(d,{children:[e.jsx(a,{children:e.jsx(l,{placeholder:"1.0.0",...s})}),e.jsx(t,{})]})})}),e.jsx("div",{children:e.jsx(o,{control:r.control,name:"windows_download_url",render:({field:s})=>e.jsxs(d,{children:[e.jsx(a,{children:e.jsx(l,{placeholder:"https://xxx.com/xxx.exe",...s})}),e.jsx(t,{})]})})})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"macOS"}),e.jsx("div",{className:"text-[0.8rem] text-muted-foreground",children:"macOS端版本号及下载地址"}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1",children:e.jsx(o,{control:r.control,name:"mac_version",render:({field:s})=>e.jsxs(d,{children:[e.jsx(a,{children:e.jsx(l,{placeholder:"1.0.0",...s})}),e.jsx(t,{})]})})}),e.jsx("div",{children:e.jsx(o,{control:r.control,name:"mac_download_url",render:({field:s})=>e.jsxs(d,{children:[e.jsx(a,{children:e.jsx(l,{placeholder:"https://xxx.com/xxx.dmg",...s})}),e.jsx(t,{})]})})})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Android"}),e.jsx("div",{className:"text-[0.8rem] text-muted-foreground",children:"Android端版本号及下载地址"}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1",children:e.jsx(o,{control:r.control,name:"android_version",render:({field:s})=>e.jsxs(d,{children:[e.jsx(a,{children:e.jsx(l,{placeholder:"1.0.0",...s})}),e.jsx(t,{})]})})}),e.jsx("div",{children:e.jsx(o,{control:r.control,name:"android_download_url",render:({field:s})=>e.jsxs(d,{children:[e.jsx(a,{children:e.jsx(l,{placeholder:"https://xxx.com/xxx.apk",...s})}),e.jsx(t,{})]})})})]})]}),e.jsx(h,{type:"submit",loading:m=="pending",onClick:()=>{r.handleSubmit(s=>{x(s)})()},children:"保存设置"})]})}function V(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"APP设置"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"管理移动应用程序相关配置，包括API接口、版本控制、推送通知等功能设置。"})]}),e.jsx(v,{}),e.jsx(A,{})]})}export{V as default};
